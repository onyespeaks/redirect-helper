<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Redirecting...</title>
</head>
<body>
  <p>Checking your access. Please wait...</p>

  <script>
    // Replace with your actual Apps Script URL
    const appsScriptUrl = "https://script.google.com/macros/s/AKfycbw_CwCNRPXK3t49Qx2VQEVSK-0BDNj1dvGfWtpsn5SAtmDQkbWskg40NSZfSVDPDYfW6Q/exec?generate=true";

    // Replace with your actual Wix video page
    const wixPageBase = "https://www.onyespeaks.com/nextsteps";

    fetch(appsScriptUrl)
      .then(res => res.json())
      .then(data => {
        if (data.token) {
          const redirectUrl = `${wixPageBase}?t=${data.token}`;
          window.location.replace(redirectUrl);
        } else {
          document.body.innerHTML = "<p>❌ Unable to verify access. Please try again from the official link.</p>";
        }
      })
      .catch(() => {
        document.body.innerHTML = "<p>⚠️ Error contacting server.</p>";
      });
  </script>
</body>
</html>
